---
// Component to display detailed information about a comic
export interface Props {
  comic: any // Using any type since we don't know the full structure from the API
}

const { comic } = Astro.props
---

<div class="bg-slate-200 rounded-lg shadow-lg overflow-hidden">
  <div class="md:flex">
    <div class="md:flex-shrink-0">
      <img
        class="h-auto w-full md:w-96 object-cover"
        src={comic.image}
        alt={`Cover for ${comic.issue}`}
      />
    </div>
    <div class="p-8">
      <h1 class="text-2xl font-bold font-montserrat text-slate-900 mb-4">
        {comic.issue}
      </h1>

      {
        comic.desc && (
          <div class="mb-6">
            <h2 class="font-montserrat text-lg font-medium text-slate-800 mb-2">
              Summary
            </h2>
            <div
              class="text-slate-700 prose prose-sm max-w-none"
              set:html={comic.desc}
            />
          </div>
        )
      }

      {/* Credits section */}
      <div class="mb-6">
        <h2 class="font-montserrat text-lg font-medium text-slate-800 mb-2">
          Issue Details
        </h2>
        <dl class="grid grid-cols-1 gap-x-4 gap-y-2 sm:grid-cols-2">
          {
            comic.characters && comic.characters.length > 0 && (
              <div class="sm:col-span-2">
                <dt class="font-medium text-slate-700">Characters</dt>
                <dd class="text-slate-600">
                  {comic.characters.map((c) => c.name).join(', ')}
                </dd>
              </div>
            )
          }
          {
            comic.series && (
              <div>
                <dt class="font-medium text-slate-700">Series</dt>
                <dd class="text-slate-600">{comic.series.name}</dd>
              </div>
            )
          }
          {
            comic.volume && (
              <div>
                <dt class="font-medium text-slate-700">Volume</dt>
                <dd class="text-slate-600">{comic.volume}</dd>
              </div>
            )
          }
          {
            comic.cover_date && (
              <div>
                <dt class="font-medium text-slate-700">Cover Date</dt>
                <dd class="text-slate-600">{comic.cover_date}</dd>
              </div>
            )
          }
          {
            comic.store_date && (
              <div>
                <dt class="font-medium text-slate-700">Store Date</dt>
                <dd class="text-slate-600">{comic.store_date}</dd>
              </div>
            )
          }
          {
            comic.price && (
              <div>
                <dt class="font-medium text-slate-700">Price</dt>
                <dd class="text-slate-600">${comic.price}</dd>
              </div>
            )
          }
          {
            comic.sku && (
              <div>
                <dt class="font-medium text-slate-700">SKU</dt>
                <dd class="text-slate-600">{comic.sku}</dd>
              </div>
            )
          }
          {
            comic.publisher && (
              <div>
                <dt class="font-medium text-slate-700">Publisher</dt>
                <dd class="text-slate-600">{comic.publisher.name}</dd>
              </div>
            )
          }
        </dl>
      </div>

      {/* Credits: Creators */}
      {
        comic.credits && comic.credits.length > 0 && (
          <div class="mb-6">
            <h2 class="font-montserrat text-lg font-medium text-slate-800 mb-2">
              Creators
            </h2>
            <dl class="grid grid-cols-1 gap-x-4 gap-y-2">
              {comic.credits.map((credit) => (
                <div>
                  <dt class="font-medium text-slate-700">{credit.role}</dt>
                  <dd class="text-slate-600">{credit.creator?.name}</dd>
                </div>
              ))}
            </dl>
          </div>
        )
      }
    </div>
  </div>
</div>
